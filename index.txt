<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <title>Document</title>
</head>
<body>
    <div class="container">
        <button onclick="getCards(1)">Drzave</button>
        <button onclick="getCards(2)">Engleska liga</button>
        <button onclick="getCards(4)">Francuska liga</button>
        <button onclick="getCards(8)">Njemačka liga</button>
        <button onclick="getCards(13)">Njemačka liga</button>
        <button onclick="getCards(14)">Njemačka liga</button>
        <div class="row mt-5" id="row">  

    </div>
        
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        function loadData(method,url,callback){
            var xhr=new XMLHttpRequest();
            xhr.onreadystatechange=function(){
                if(this.readyState===4 && this.status===200){
                    callback(JSON.parse(this.responseText));
                }
            }
            xhr.open(method,url,true);
            xhr.setRequestHeader("x-rapidapi-key", "1b0c889093msh064c180d09030cdp1330e0jsn88d6c66eb7ed");
            xhr.setRequestHeader("x-rapidapi-host", "api-football-v1.p.rapidapi.com");
            xhr.send();
        }
        document.getElementById("row").innerHTML='';
        var value=1;
        loadData("GET","https://api-football-v1.p.rapidapi.com/v2/teams/league/"+value+"",function(data){
            console.log(data);
            getCountry(data);
        
        });
        function getCards(value){
            
            document.getElementById("row").innerHTML='';
            loadData("GET","https://api-football-v1.p.rapidapi.com/v2/teams/league/"+value+"",function(data){
                console.log(data);
                getCountry(data);
            
            });
        }

        loadData("GET","https://api-football-v1.p.rapidapi.com/v2/players/squad/85/2018-2019",function(data){
           
            //getCroatiaPlayers(data);
        });
        function getCountry(data){
            var teams=data.api.teams;
            console.log(teams);
            teams.forEach(function(team){
                var col = document.createElement("div");
                col.className='col-md-4 mb-4 m-auto';
                col.style='width:17rem';

                var card = document.createElement("div");
                card.className='card';

                var card_body=document.createElement("div");
                card_body.className='card-body';

                var img=document.createElement("img");
                img.className="card-img-top m-auto mt-2";
                img.style="width:12rem;height:10rem;"
                img.src=team.logo;

                var title=document.createElement("h5");
                title.className='card-title text-center';
                var textnode = document.createTextNode(team.name);
                title.appendChild(textnode);

                card_body.appendChild(title);
                card.appendChild(img);
                card.appendChild(card_body);
                col.appendChild(card);
                
                document.getElementById("row").appendChild(col);
                
            })
        }
        function getCroatiaPlayers(data){
            console.log(data.api.players);
        }
        // $.ajax({
        //     url:"https://api-football-v1.p.rapidapi.com/v2/teams/league/4",
        //     type:"GET",
        //     headers: {
	    //      	"x-rapidapi-key": "1b0c889093msh064c180d09030cdp1330e0jsn88d6c66eb7ed",
	    //     	"x-rapidapi-host": "api-football-v1.p.rapidapi.com"
	    //     },
        //     dataType:"JSON",
        //     data:JSON.stringify({ }),
        //     success:function(data){
        //         console.log(data.api.teams);
        //     }
        // });
        // const settings = {
	    //     "async": true,
	    //     "crossDomain": true,
	    //     "url": "https://api-football-v1.p.rapidapi.com/v2/teams/league/4",
	    //     "method": "GET",
	    //     "headers": {
	    //     	"x-rapidapi-key": "1b0c889093msh064c180d09030cdp1330e0jsn88d6c66eb7ed",
	    //     	"x-rapidapi-host": "api-football-v1.p.rapidapi.com"
	    //     }
        // };

        // $.ajax(settings).done(function (response) {
        // 	console.log(response.api.teams);
        // });
    </script>
</body>
</html>