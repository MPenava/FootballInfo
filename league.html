<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href='images/ball.png'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/47f0b88d10.js"></script>
    <link rel="stylesheet" href="style.css">
    <title>FootballInfo</title>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-primary ">
        <div class="container">
        <a class="navbar-brand" href="index.html" class="ml-3"><i class="far fa-futbol fa-2x text-light">&nbsp;&nbsp;<span
                style="font-size:30px;">Football<span class="text-dark">Info</span></span></i></a>
        <button class="navbar-toggler bg-light" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav m-auto">
            <li class="nav-item ml-2">
                <a class="nav-link active text-light" aria-current="page" href="index.html">Naslovnica</a>
            </li>
            <li class="nav-item ml-2">
                <a class="nav-link active text-light" aria-current="page" href="country.html">Reprezentacije</a>
            </li>
            <li class="nav-item ml-2">
                <!-- Example single danger button -->
                <div class="btn-group mr-5">
                <a type="button" class="nav-link text-light dropdown-toggle" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    Lige
                </a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="league.html?value=2">Premier League</a></li>
                    <li><a class="dropdown-item" href="league.html?value=4">Ligue 1</a></li>
                    <li><a class="dropdown-item" href="league.html?value=8">Bundesliga</a></li>
                    <li><a class="dropdown-item" href="league.html?value=30">LaLiga</a></li>
                    <li><a class="dropdown-item" href="league.html?value=28">Serie A</a></li>
                </ul>
                </div>
            </li>
            <li class="nav-item ml-2">
                <a class="nav-link active text-light" aria-current="page" href="transfers.html">Transferi</a>
            </li>
            </ul>

        </div>
        </div>
    </nav>
    <div class="container mt-3">
        <h1 class="text-primary text-center" id="naslov"></h1>
        <div id="about-league">
            <div class="row">
                <div class="col-3">
                    <img src="" alt="" id="team-img">
                </div>
                <div class="col-9 mt-2">
                    <h4>O ligi</h4>
                    <p id="description"></p>
                </div>
            </div>
            <hr>
            <div class="row mt-3" id="teams">
                <div class="col-12 mb-2">
                    <h2 class="text-primary text-center">Ekipe</h2>
                </div>
            </div>
        </div>
    </div>
    <footer class="bg-primary  d-flex justify-content-between text-light" style="height:40px;">
        <div class="copyright" style="font-size: 13px;margin: auto auto;">2021 © Football<span class="text-dark">Info</span>    </div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js"
        integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc"
        crossorigin="anonymous"></script>
    <script>
        var value=window.location.search.split("=")[1];
        console.log(value);
        var naslovi=[
            {
                id:2,
                name:'Premier League',
                description:'Premier liga, koja se često egzonimno naziva engleska Premier liga ili EPL, najviša je razina sustava engleske nogometne lige. Natječe se 20 klubova, djeluje po sustavu promocije i ispadanja s Engleskom nogometnom ligom (EFL). Sezone traju od kolovoza do svibnja, a svaka momčad igra 38 utakmica (igrajući svih 19 drugih momčadi i kod kuće i u gostima).Većina utakmica igra se u subotu i nedjelju popodne.',
                link:'https://media.api-sports.io/football/leagues/39.png'
            },
            {
                id:4,
                name:'Ligue 1',
                description:'Ligue 1 (nekad poznata pod imenom Division 1, a ponekad zvana i Le Championnat) prva je francuska profesionalna nogometna liga. To je glavno državno nogometno natjecanje i glavni ogranak francuskog nogometnog ligaškog sistema. Ligue 1 je jedna od dvije divizije koje tvore Ligue de Football Professionnel (druga je Ligue 2). U njoj se nalazi 20 nogometnih klubova koji se natječu po sistemu promocije i ispadanja u drugu ligu. Sezone traju od kolovoza do svibnja, a u navedenom razdoblju svaki klub igra 38 utakmica što znači da se u sezoni odigra sveukupno 380 utakmica. ',
                link:'https://media.api-sports.io/football/leagues/61.png'
            },
            {
                id:8,
                name:'Bundesliga',
                description:'Bundesliga, ponekad se naziva i Fußball-Bundesliga ili 1. Bundesliga, profesionalna je nogometna asocijacija ligi u Njemačkoj. Na vrhu njemačkog nogometnog ligaškog sustava, Bundesliga je glavno njemačko nogometno natjecanje. Bundesliga broji 18 momčadi i djeluje na sustavu promocije i ispadanja s 2. Bundesligi. Godišnja doba traju od kolovoza do svibnja. Većina igara igra se subotom i nedjeljom, a nekoliko i radnim danima.',
                link:'https://media.api-sports.io/football/leagues/78.png'
            },
            {
                id:30,
                name:'LaLiga',
                description:'Campeonato Nacional de Liga de Primera División,  obično poznat samo kao La Liga  i službeno kao LaLiga Santander iz sponzorskih razloga, stiliziran pod LaLiga, vrhunski je profesionalni nogometni odjel muškaraca u sustavu španjolske nogometne lige. Pod upravom Lige Nacional de Fútbol Profesional, natječe se 20 momčadi, s tri najniže plasirane momčadi na kraju svake sezone ispadnu u Segundu División i zamijenjene s dvije najbolje momčadi i pobjednikom doigravanja u ta podjela.',
                link:'https://media.api-sports.io/football/leagues/140.png'
            },
            {
                id:28,
                name:'Serie A',
                description:"Serie A, koja se također naziva Serie A TIM zbog sponzorstva od strane TIM-a, profesionalno je ligaško natjecanje za nogometne klubove smještene na vrhu talijanskog sustava nogometne lige, a pobjedniku se dodjeljuju Scudetto i Coppa Campioni d'Italia. Djeluje kao okrugli turnir više od devedeset godina od sezone 1929.-30. Organizirali su ga Direttorio Divisioni Superiori do 1943. i Lega Calcio do 2010., kada je Lega Serie A stvorena za sezonu 2010-11. Serie A se smatra jednom od najboljih nogometnih liga na svijetu i često se prikazuje kao najtaktičnija i obrambeno najsigurnija nacionalna liga.",
                link:'https://media.api-sports.io/football/leagues/135.png'
            },
        ];
        var naslov=document.getElementById("naslov");
        var description=document.getElementById("description");
        var image=document.getElementById("team-img");
        title='';
        naslovi.forEach(function(league){
            if(league.id==value){
                title=league.name;
                text=league.description;
                link=league.link;
            }
        })
        naslov.innerText=title;
        description.innerText=text;
        image.src=link;

        function loadData(method,url,callback){
            var xhr=new XMLHttpRequest();
            xhr.onreadystatechange=function(){
                if(this.readyState===4 && this.status===200){
                    callback(JSON.parse(this.responseText));
                }
            }
            xhr.open(method,url,true);
            xhr.setRequestHeader("x-rapidapi-key", "1b0c889093msh064c180d09030cdp1330e0jsn88d6c66eb7ed");
            xhr.setRequestHeader("x-rapidapi-host", "api-football-v1.p.rapidapi.com");
            xhr.send();
        }
        var leagueTeams=[];
        loadData("GET","https://api-football-v1.p.rapidapi.com/v2/teams/league/"+value+"",function(data){
            leagueTeams=data.api.teams;
            console.log(leagueTeams);
            leagueTeams.forEach(function(team){
                var col = document.createElement("div");
                col.className='col-md-4 mb-4 m-auto';
                col.style='width:17rem;height:22rem;';
                var card = document.createElement("div");
                card.className='card';
                var card_body=document.createElement("div");
                card_body.className='card-body';
                var img=document.createElement("img");
                img.className="card-img-top m-auto mt-2";
                img.style="width:12rem;height:10rem;"
                img.src=team.logo;
                var title=document.createElement("h5");
                title.className='card-title text-center';
                var textnode = document.createTextNode(team.name);
                title.appendChild(textnode);

                var card_footer=document.createElement("p");
                card_footer.className='card-text';
                var list=document.createElement("ul");
                list.className='list-style-type:square;font-size:12px;color:gray;';
                var li=document.createElement("li");
                var stadion = document.createTextNode('Stadion: ' + team.venue_name);
                var li_sec=document.createElement("li");
                var kapacitet = document.createTextNode('Kapacitet: ' + team.venue_capacity);
                li.appendChild(stadion);
                li_sec.appendChild(kapacitet);
                list.appendChild(li);
                list.appendChild(li_sec);
                card_footer.appendChild(list);
                card_body.appendChild(title);
                card.appendChild(img);
                card.appendChild(card_body);
                card.appendChild(card_footer);
                col.appendChild(card);
                
                document.getElementById("teams").appendChild(col);
            })

        });
    </script>
</body>
</html>